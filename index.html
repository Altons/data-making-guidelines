<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Make By Example!</title>

        <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
        <link href="https://bootswatch.com/yeti/bootstrap.min.css" rel="stylesheet">
        <link href="static/custom.css" rel="stylesheet">

    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-sm-10">

                    <h1 class="heavy">Make By Example!</h1>
                    <h3 class="heavy">Intro</h2>
                    <p>some words and stuff</p>

                    <h3 class="heavy">Example Make Rules</h2>

                    <h4>1. Downloading a zip directory</h4>
                    <div class="codeblock">
                        <span class="more" data-toggle="popover" data-placement="top" data-content="this is the target. there's no dependency here, b/c it's being downloaded from the web">parcels.zip</span>:
                        <br>&nbsp;&nbsp;&nbsp;
                        <span class="more" data-toggle="popover" data-placement="top" data-content="wget retrieves a file from a URL">wget</span> 
                        <span class="more" data-toggle="popover" data-placement="top" data-content="this option causes the downloaded file to have a local timestamp, rather than using the timestamp of the file on the server (default wget behavior). this is necessary b/c make looks at the last-modified metadata to determine what needs to be built">--no-use-server-timestamps</span> <span class="more" data-toggle="popover" data-placement="top" data-content="break up code into multiple lines when it gets long, for readability">\</span>
                        <br>&nbsp;&nbsp;&nbsp;
                        http://maps.indiana.edu/download/Reference/Land_Parcels_County_IDHS.zip <span class="more" data-toggle="popover" data-placement="top" data-content="a wget option that allows you to rename what you're downloading">-O</span> <span class="more" data-toggle="popover" data-placement="top" data-content="this is an automatic variable referring to the filename of the target, in this case parcels.zip">$@</span>
                    </div>

                    <h4>2. Unzipping a zip directory</h4>
                    <div class="codeblock">
                        <span class="more" data-toggle="popover" data-placement="top" data-content="this states that chicomm.shp is an intermediate target, meaning that it will be deleted after all targets listing it as a dependency have been built">.INTERMEDIATE</span>:
                        chicomm.shp<br>
                        <span class="more" data-toggle="popover" data-placement="top" data-content="the target">chicomm.shp</span>:
                        <span class="more" data-toggle="popover" data-placement="top" data-content="the zipped dependency">chicomm.zip</span>
                        <br>&nbsp;&nbsp;&nbsp;
                        unzip <span class="more" data-toggle="popover" data-placement="bottom" data-content="this option overwrites existing files">-o</span> <span class="more" data-toggle="popover" data-placement="bottom" data-content="this is an automatic variable referring to the name of the first dependency - in this case, chicomm.zip">$<</span>
                    </div>

                    <h4>3. Converting excel to csv</h4>
                    <div class="codeblock">
                        <span class="more" data-toggle="popover" data-placement="top" data-content="this states that parcel_survey.csv is an intermediate target, meaning that it will be deleted after all targets listing it as a dependency have been built">.INTERMEDIATE</span>:
                        parcel_survey.csv<br>
                        <span class="more" data-toggle="popover" data-placement="top" data-content="the csv target">parcel_survey.csv</span>:
                        <span class="more" data-toggle="popover" data-placement="top" data-content="the excel dependency">parcel_survey.xlsx</span>
                        <br>&nbsp;&nbsp;&nbsp;
                        <span class="more" data-toggle="popover" data-placement="bottom" data-content="a csvkit command for converting to csv">in2csv</span> <span class="more" data-toggle="popover" data-placement="bottom" data-content="an automatic variable referring to the filename of the first dependency, in this case parcel_survey.xlsx">$<</span> <span class="more" data-toggle="popover" data-placement="bottom" data-content="this redirects output to a file instead of stdout (the console)">></span> <span class="more" data-toggle="popover" data-placement="bottom" data-content="an automatic variable referring to the filename of the target, in this case parcel_survey.csv">$@</span>
                    </div>

                    <h4>4. Grabbing select columns from an excel doc, & creating a csv with a new header</h4>
                    <div class="codeblock">
                        <span class="more" data-toggle="popover" data-placement="top" data-content="the csv target">school_id_lookup.csv</span>:
                        <span class="more" data-toggle="popover" data-placement="top" data-content="the excel dependency">School_data_8-3-14.xlsx</span>
                        <br>&nbsp;&nbsp;&nbsp;
                        <span class="more" data-toggle="popover" data-placement="bottom" data-content="a csvkit command for converting to csv">in2csv</span> <span class="more" data-toggle="popover" data-placement="bottom" data-content="an automatic variable referring to the filename of the first dependency, in this case School_data_8-3-14.xlsx">$<</span> <span class="more" data-toggle="popover" data-placement="bottom" data-content="chaining processes: stdout of what's on the left = stdin of what's on the right">|</span>\
                        <br>&nbsp;&nbsp;&nbsp;
                        <span class="more" data-toggle="popover" data-placement="bottom" data-content="a csvkit command for taking a slice of a csv">csvcut</span> <span class="more" data-toggle="popover" data-placement="bottom" data-content="the -c option speficies which columns to grab - this grabs the first and second column in the csv">-c "1,2"</span> |\
                        <br>&nbsp;&nbsp;&nbsp;
                        (<span class="more" data-toggle="popover" data-placement="bottom" data-content="create a csv header row with two columns">echo "school_id,school_name"</span>; <span class="more" data-toggle="popover" data-placement="bottom" data-content="prints output from the second line onwards - everything in a csv except for the header row">tail +2</span>) <span class="more" data-toggle="popover" data-placement="bottom" data-content="this redirects output to a file instead of stdout (the console)">></span> finished/<span class="more" data-toggle="popover" data-placement="bottom" data-content="notdir is a function - given a filepath, it returns only the file name, without the directory path">$(notdir $@)</span>
                    </div>

                    <h4>5. Join csvs, using an implicit rule</h4>
                    <div class="codeblock">
                        <span class="more" data-toggle="popover" data-placement="top" data-content="the same stem as the dependency">%</span>hourly.joined.csv: <span class="more" data-toggle="popover" data-placement="top" data-content="% will match any non-empty substring (the match is called the stem), making this an implicit rule">%</span>hourly.csv stations.csv
                        <br>&nbsp;&nbsp;&nbsp;
                        <span class="more" data-toggle="popover" data-placement="bottom" data-content="a csvkit command for joining csvs">csvjoin</span> <span class="more" data-toggle="popover" data-placement="bottom" data-content="the -c option speficies which columns to join - this joins on the 3rd column in the first csv = the 4th column in the second csv">-c "3,4"</span> <span class="more" data-toggle="popover" data-placement="bottom" data-content="the first csv to be joined">$<</span> <span class="more" data-toggle="popover" data-placement="bottom" data-content="the second csv to be joined">stations.csv</span>
                        <span class="more" data-toggle="popover" data-placement="bottom" data-content="this redirects output to a file instead of stdout (the console)">></span> finished/<span class="more" data-toggle="popover" data-placement="bottom" data-content="notdir is a function - given a filepath, it returns only the file name, without the directory path">$(notdir $@)</span>
                    </div>
                    <br><br><br>



                </div>
            </div>
        <div>
    </body>

    <script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script>
        $(function () {
            $('[data-toggle="popover"]').popover({'trigger':'hover'})
        })
    </script>
</html>